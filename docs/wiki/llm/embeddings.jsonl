{"id": "ARQUITETURA.md::section-1", "system": "wiki", "doc_path": "docs/wiki/ARQUITETURA.md", "type": "wiki", "section": "Document", "content": "[Wiki](README.md) > Mapa de Arquitetura\n\n# Mapa de arquitetura (conceitual)"}
{"id": "ARQUITETURA.md::section-2", "system": "wiki", "doc_path": "docs/wiki/ARQUITETURA.md", "type": "wiki", "section": "Visão macro", "content": "## Visão macro\nO projeto é composto por três camadas principais: **Cliente**, **Protocolo** e **Servidor**, com dados e scripts como pontos de extensão.\n\n```\n+-------------------+        +--------------------+        +-------------------+\n|      Cliente      | <----> |     Protocolo      | <----> |      Servidor     |\n| (OTClient + UI)   |        | (Login/Status/Game)|        | (CrystalServer)   |\n+-------------------+        +--------------------+        +-------------------+\n        |                                                       |\n        |                                                       |\n        v                                                       v\n  Assets/UI/Mods                                         Scripts/Data/DB\n```"}
{"id": "ARQUITETURA.md::section-3", "system": "wiki", "doc_path": "docs/wiki/ARQUITETURA.md", "type": "wiki", "section": "Camadas", "content": "## Camadas\n- **Cliente**: renderização, UI e input (`otclient/src`, `otclient/modules`, `otclient/data`).\n- **Protocolo**: troca de mensagens entre cliente e servidor (`protocolgame`, `protocollogin`, `protocolstatus`).\n- **Servidor**: regras de jogo, estado persistente, scripts e banco (`crystalserver/src`, `crystalserver/data`)."}
{"id": "ARQUITETURA.md::section-4", "system": "wiki", "doc_path": "docs/wiki/ARQUITETURA.md", "type": "wiki", "section": "Fluxos principais", "content": "## Fluxos principais\n- **Login**: cliente → `ProtocolLogin` → validação no servidor → resposta de login.\n- **Jogo**: cliente ↔ `ProtocolGame` ↔ núcleo do jogo (mapas, criaturas, itens).\n- **Eventos/scripts**: servidor aciona scripts Lua conforme eventos/ações."}
{"id": "ARQUITETURA.md::section-5", "system": "wiki", "doc_path": "docs/wiki/ARQUITETURA.md", "type": "wiki", "section": "Pontos de acoplamento forte", "content": "## Pontos de acoplamento forte\n- **OpCodes e versões de protocolo**: mudanças exigem sincronização cliente ↔ servidor.\n- **Estrutura de dados de itens/criaturas**: mudanças nos dados impactam rendering e gameplay."}
{"id": "ARQUITETURA.md::section-6", "system": "wiki", "doc_path": "docs/wiki/ARQUITETURA.md", "type": "wiki", "section": "Pontos de desacoplamento", "content": "## Pontos de desacoplamento\n- **Scripts Lua**: permitem extensões sem recompilar.\n- **Módulos do cliente**: UI e features podem ser adicionadas/removidas via módulos."}
{"id": "FLUXOS.md::section-1", "system": "wiki", "doc_path": "docs/wiki/FLUXOS.md", "type": "wiki", "section": "Document", "content": "# Fluxos principais (alto nível)"}
{"id": "FLUXOS.md::section-2", "system": "wiki", "doc_path": "docs/wiki/FLUXOS.md", "type": "wiki", "section": "Fluxo de login", "content": "## Fluxo de login\n1. **Cliente** inicia e carrega módulos de entrada (ex.: `otclient/modules/client_entergame/`).\n2. **Cliente** envia credenciais via protocolo (`otclient/src/client/protocolgame*.cpp`).\n3. **Servidor** recebe no stack de rede/protocolo (`crystalserver/src/server/network/protocol/`) e valida conta em `crystalserver/src/account/`."}
{"id": "FLUXOS.md::section-3", "system": "wiki", "doc_path": "docs/wiki/FLUXOS.md", "type": "wiki", "section": "Comunicação cliente ↔ servidor", "content": "## Comunicação cliente ↔ servidor\n- **Cliente** serializa mensagens no protocolo (`otclient/src/client/protocolgameparse.cpp` / `protocolgamesend.cpp`).\n- **Servidor** trata mensagens na camada de protocolo (`crystalserver/src/server/network/protocol/`) e encaminha ao núcleo do jogo (`crystalserver/src/game/`)."}
{"id": "FLUXOS.md::section-4", "system": "wiki", "doc_path": "docs/wiki/FLUXOS.md", "type": "wiki", "section": "Game loop principal", "content": "## Game loop principal\n- **Servidor**: fluxo central em `crystalserver/src/game/` com apoio de agendadores (`crystalserver/src/game/scheduling/`).\n- **Cliente**: loop principal em `otclient/src/client/game.cpp` e camadas do framework (`otclient/src/framework/`)."}
{"id": "FLUXOS.md::section-5", "system": "wiki", "doc_path": "docs/wiki/FLUXOS.md", "type": "wiki", "section": "Onde scripts entram no fluxo", "content": "## Onde scripts entram no fluxo\n- **Servidor**: scripts Lua são carregados de `crystalserver/data/scripts/` e acionados por eventos em `crystalserver/data/events/` e registros XML.\n- **Cliente**: módulos e scripts em `otclient/modules/` e `otclient/mods/` integram UI e comportamento."}
{"id": "INDICES.md::section-1", "system": "wiki", "doc_path": "docs/wiki/INDICES.md", "type": "wiki", "section": "Document", "content": "[Wiki](README.md) > Índices\n\n# Índices avançados"}
{"id": "INDICES.md::section-2", "system": "wiki", "doc_path": "docs/wiki/INDICES.md", "type": "wiki", "section": "Índice alfabético de sistemas", "content": "## Índice alfabético de sistemas\n- [Assets](assets/README.md)\n- [Cliente](client/README.md)\n- [Configuração](config/README.md)\n- [Economia](game-systems/economia/README.md)\n- [Eventos](game-systems/eventos/README.md)\n- [Game Systems (geral)](game-systems/README.md)\n- [Itens](game-systems/itens/README.md)\n- [Magias e runas](game-systems/magias-runas/README.md)\n- [Mapas](game-systems/mapas/README.md)\n- [Protocolos](protocol/README.md)\n- [Scripts](scripts/README.md)\n- [Servidor](server/README.md)\n- [Skills](game-systems/skills/README.md)\n- [UI](ui/README.md)"}
{"id": "INDICES.md::section-3", "system": "wiki", "doc_path": "docs/wiki/INDICES.md", "type": "wiki", "section": "Índice por tipo", "content": "## Índice por tipo\n- **Server**: [Servidor](server/README.md), [Sistemas de jogo](game-systems/README.md), [Scripts](scripts/README.md), [Configuração](config/README.md).\n- **Client**: [Cliente](client/README.md), [UI](ui/README.md), [Assets](assets/README.md).\n- **Shared/Processo**: [Protocolos](protocol/README.md), [Ferramentas](tools/README.md), [Testes](tests/README.md), [Governança](governance/README.md)."}
{"id": "INDICES.md::section-4", "system": "wiki", "doc_path": "docs/wiki/INDICES.md", "type": "wiki", "section": "Índice por prioridade", "content": "## Índice por prioridade\n- **Crítico**: [Servidor](server/README.md), [Protocolos](protocol/README.md), [Scripts](scripts/README.md), [Sistemas de jogo](game-systems/README.md).\n- **Médio**: [Cliente](client/README.md), [UI](ui/README.md), [Configuração](config/README.md).\n- **Baixo**: [Assets](assets/README.md), [Ferramentas](tools/README.md), [Testes](tests/README.md), [Compartilhado](shared/README.md)."}
{"id": "INDICES.md::section-5", "system": "wiki", "doc_path": "docs/wiki/INDICES.md", "type": "wiki", "section": "Índice por linguagem", "content": "## Índice por linguagem\n- **C++**: [Servidor](server/README.md), [Cliente](client/README.md), [Protocolos](protocol/README.md).\n- **Lua**: [Scripts](scripts/README.md), [Sistemas de jogo](game-systems/README.md), [UI](ui/README.md)."}
{"id": "MAPA_REPOSITORIO.md::section-1", "system": "wiki", "doc_path": "docs/wiki/MAPA_REPOSITORIO.md", "type": "wiki", "section": "Document", "content": "# Mapa do repositório"}
{"id": "MAPA_REPOSITORIO.md::section-2", "system": "wiki", "doc_path": "docs/wiki/MAPA_REPOSITORIO.md", "type": "wiki", "section": "Pastas principais (nível raiz)", "content": "## Pastas principais (nível raiz)\n- `ai/` — materiais internos de contexto e execução.\n- `codex-client-readmes/` — documentação organizada por áreas do OTClient.\n- `crystalserver/` — servidor Open Tibia (CrystalServer).\n- `docs/` — documentos gerais do repositório.\n- `otclient/` — OTClient customizado."}
{"id": "MAPA_REPOSITORIO.md::section-3", "system": "wiki", "doc_path": "docs/wiki/MAPA_REPOSITORIO.md", "type": "wiki", "section": "Separação por domínio", "content": "## Separação por domínio\n### Servidor\n- `crystalserver/src/` — código C++ do servidor (núcleo, rede, banco, entidades, mapa, etc.).\n- `crystalserver/data/` — scripts Lua, eventos, itens, NPCs, spells e configuração em XML.\n- `crystalserver/data-crystal/` e `crystalserver/data-global/` — variações de dados/configuração.\n- `crystalserver/config.lua.dist` — configuração base do servidor.\n- `crystalserver/tests/` — testes do servidor.\n\n### Cliente\n- `otclient/src/` — código C++ do cliente (framework + client).\n- `otclient/modules/` — módulos de UI e funcionalidades do jogo.\n- `otclient/data/` — assets (imagens, fontes, estilos, sons, coisas/“things”).\n- `otclient/mods/` — extensões/modificações do cliente.\n- `otclient/tools/` e `otclient/tests/` — utilitários e testes.\n\n### Compartilhado / apoio\n- `docs/` — documentos gerais (regras, enums, playbooks).\n- `ai/` — guias e contexto de execução.\n- `codex-client-readmes/` — documentação baseada no OTClient para referência."}
{"id": "METRICAS.md::section-1", "system": "wiki", "doc_path": "docs/wiki/METRICAS.md", "type": "wiki", "section": "Document", "content": "# Métricas iniciais"}
{"id": "METRICAS.md::section-2", "system": "wiki", "doc_path": "docs/wiki/METRICAS.md", "type": "wiki", "section": "Totais", "content": "## Totais\n- **Arquivos**: 11.450\n- **Pastas**: 1.023"}
{"id": "METRICAS.md::section-3", "system": "wiki", "doc_path": "docs/wiki/METRICAS.md", "type": "wiki", "section": "Linguagens detectadas (por extensão)", "content": "## Linguagens detectadas (por extensão)\n- Lua (`.lua`)\n- C++ (`.cpp`, `.hpp`, `.h`)\n- XML (`.xml`)\n- OTUI (`.otui`)\n- Markdown (`.md`)\n- CMake (`.cmake`)\n- Shaders (`.frag`)\n- Shell (`.sh`)\n- Assets (`.png`, `.jpg`, `.ttf`, `.otfont`, `.otbm`)"}
{"id": "METRICAS.md::section-4", "system": "wiki", "doc_path": "docs/wiki/METRICAS.md", "type": "wiki", "section": "Principais áreas do código", "content": "## Principais áreas do código\n- **Servidor**: `crystalserver/src/` e `crystalserver/data/`.\n- **Cliente**: `otclient/src/`, `otclient/modules/`, `otclient/data/`.\n- **Documentação/apoio**: `docs/`, `ai/`, `codex-client-readmes/`."}
{"id": "METRICAS.md::section-5", "system": "wiki", "doc_path": "docs/wiki/METRICAS.md", "type": "wiki", "section": "Sistemas críticos identificados", "content": "## Sistemas críticos identificados\n- **Rede e protocolos** (cliente/servidor).\n- **Game loop** (servidor e cliente).\n- **Scripts Lua e eventos** (servidor).\n- **UI e módulos** (cliente).\n- **Banco de dados e conta** (servidor)."}
{"id": "METRICAS.md::section-6", "system": "wiki", "doc_path": "docs/wiki/METRICAS.md", "type": "wiki", "section": "Relatório de qualidade da wiki", "content": "## Relatório de qualidade da wiki\n- **Páginas da wiki**: 33 arquivos Markdown.\n- **Referências a arquivos/pastas do repositório**: 143.\n- **Evolução da cobertura**:\n  - snapshot anterior: 90 referências.\n  - snapshot atual: 143 referências."}
{"id": "METRICAS.md::section-7", "system": "wiki", "doc_path": "docs/wiki/METRICAS.md", "type": "wiki", "section": "Sistemas com risco documental", "content": "## Sistemas com risco documental\n- **Crítico**: `crystalserver/src/enums/`, `crystalserver/src/utils/`.\n- **Médio**: `crystalserver/data/scripts/globalevents/`, `talkactions/`.\n- **Baixo**: `otclient/src/tools/`, assets adicionais."}
{"id": "METRICAS.md::section-8", "system": "wiki", "doc_path": "docs/wiki/METRICAS.md", "type": "wiki", "section": "Áreas sensíveis a mudanças", "content": "## Áreas sensíveis a mudanças\n- **Protocolos**: mudanças em opcodes exigem sincronização cliente ↔ servidor.\n- **Scripts**: alterações em eventos exigem revisão de callbacks e XML.\n- **Mapas/itens**: alterações em dados impactam UI e gameplay."}
{"id": "README.md::section-1", "system": "wiki", "doc_path": "docs/wiki/README.md", "type": "wiki", "section": "Document", "content": "<!-- tags: - wiki - overview - docs priority: high -->"}
{"id": "README.md::section-2", "system": "wiki", "doc_path": "docs/wiki/README.md", "type": "wiki", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Hub central com o índice e links para toda a wiki.\n- **Why**: Oferece navegação única e visão geral da documentação.\n- **Where**: docs/wiki/README.md\n- **How**: Agrupa links por domínio e aponta métricas, índices e governança.\n- **Extends**: Adicionar novos links de seções e sistemas.\n- **Risks**: Links quebrados se novas páginas não forem indexadas.\n\n# Wiki do 4Fun OTServer + OTClient"}
{"id": "README.md::section-3", "system": "wiki", "doc_path": "docs/wiki/README.md", "type": "wiki", "section": "Visão geral", "content": "## Visão geral\nEsta wiki é o ponto central para documentar a arquitetura, módulos e fluxos do servidor CrystalServer e do OTClient customizado presentes neste repositório."}
{"id": "README.md::section-4", "system": "wiki", "doc_path": "docs/wiki/README.md", "type": "wiki", "section": "Objetivo da wiki", "content": "## Objetivo da wiki\nOrganizar a documentação técnica em alto nível, iniciando com um mapa do projeto e evoluindo para descrições detalhadas em próximas execuções."}
{"id": "README.md::section-5", "system": "wiki", "doc_path": "docs/wiki/README.md", "type": "wiki", "section": "Índice", "content": "## Índice\n- [Mapa do repositório](MAPA_REPOSITORIO.md)\n- [Sistemas identificados](SISTEMAS.md)\n- [Fluxos principais](FLUXOS.md)\n- [Métricas iniciais](METRICAS.md)\n- [Mapa de arquitetura](ARQUITETURA.md)\n- [Índices avançados](INDICES.md)\n- [Roadmap da documentação](roadmap.md)\n- [Governança](governance/README.md)\n- [Glossário](glossary/README.md)\n- [Mapa semântico (LLM)](llm/semantic-map.md)\n- [Guia para agentes/LLMs](llm/agent-guide.md)\n- [Servidor](server/README.md)\n- [Cliente](client/README.md)\n- [Compartilhado](shared/README.md)\n- [Sistemas de jogo](game-systems/README.md)\n  - [Combate](game-systems/combate/README.md)\n  - [Criaturas e NPCs](game-systems/criaturas-npcs/README.md)\n  - [Itens](game-systems/itens/README.md)\n  - [Magias e runas](game-systems/magias-runas/README.md)\n  - [Mapas](game-systems/mapas/README.md)\n  - [Eventos](game-systems/eventos/README.md)\n  - [Skills](game-systems/skills/README.md)\n  - [Economia](game-systems/economia/README.md)\n- [UI](ui/README.md)\n- [Protocolos](protocol/README.md)\n- [Scripts](scripts/README.md)\n- [Configuração](config/README.md)\n- [Assets](assets/README.md)\n- [Ferramentas](tools/README.md)\n- [Testes](tests/README.md)\n\n> **Nota**: A documentação detalhada continua em expansão. Esta wiki será aprofundada em próximas execuções."}
{"id": "SISTEMAS.md::section-1", "system": "wiki", "doc_path": "docs/wiki/SISTEMAS.md", "type": "wiki", "section": "Document", "content": "# Sistemas identificados (existentes no código)"}
{"id": "SISTEMAS.md::section-2", "system": "wiki", "doc_path": "docs/wiki/SISTEMAS.md", "type": "wiki", "section": "Servidor (CrystalServer)", "content": "## Servidor (CrystalServer)\n- **Core do servidor**: inicialização e ciclo principal em `crystalserver/src/game/` e `crystalserver/src/server/`.\n- **Rede e protocolos**: camadas em `crystalserver/src/server/network/` (connection/message/protocol).\n- **Banco de dados**: camada em `crystalserver/src/database/` + `schema.sql`.\n- **Contas e autenticação**: `crystalserver/src/account/`.\n- **Criaturas e combate**: `crystalserver/src/creatures/` (combat, monsters, npcs, players).\n- **Itens**: `crystalserver/src/items/` e definições em `crystalserver/data/items/`.\n- **Mapas**: `crystalserver/src/map/`.\n- **Scripts e eventos (Lua)**: `crystalserver/data/scripts/` e `crystalserver/data/events/`.\n- **Magias, runas e armas**: `crystalserver/data/scripts/spells/`, `runes/`, `weapons/`.\n- **Movimentos e ações**: `crystalserver/data/scripts/movements/` e `actions/`.\n- **Configurações**: `crystalserver/config.lua.dist` e `crystalserver/data/XML/`.\n- **Logs e métricas**: `crystalserver/data/logs/` e `crystalserver/metrics/`.\n- **Segurança**: `crystalserver/src/security/`.\n- **Protobuf**: `crystalserver/src/protobuf/`."}
{"id": "SISTEMAS.md::section-3", "system": "wiki", "doc_path": "docs/wiki/SISTEMAS.md", "type": "wiki", "section": "Cliente (OTClient)", "content": "## Cliente (OTClient)\n- **Core do cliente**: `otclient/src/client/`.\n- **Framework**: `otclient/src/framework/` (core, graphics, input, net, platform, sound, ui, luaengine).\n- **Protocolos de rede**: `otclient/src/client/protocolgame*.cpp` e `protocolcodes*`.\n- **UI/OTUI**: `otclient/data/styles/` e arquivos `.otui`, além de `otclient/modules/`.\n- **Módulos de jogo**: `otclient/modules/game_*` (inventário, battle, minimap, spells etc.).\n- **Módulos base**: `otclient/modules/corelib/`, `modulelib/`, `gamelib/`.\n- **Assets**: `otclient/data/` (imagens, fontes, sons, things).\n- **Mods**: `otclient/mods/`.\n- **Protobuf**: `otclient/src/protobuf/`."}
{"id": "SISTEMAS.md::section-4", "system": "wiki", "doc_path": "docs/wiki/SISTEMAS.md", "type": "wiki", "section": "Compartilhado / apoio", "content": "## Compartilhado / apoio\n- **Documentação e referências**: `docs/`, `ai/`, `codex-client-readmes/`."}
{"id": "assets/README.md::section-1", "system": "assets", "doc_path": "docs/wiki/assets/README.md", "type": "assets", "section": "Document", "content": "<!-- tags: - assets - client priority: medium -->"}
{"id": "assets/README.md::section-2", "system": "assets", "doc_path": "docs/wiki/assets/README.md", "type": "assets", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Assets usados pelo OTClient (imagens, sons, estilos).\n- **Why**: Suporta renderização e UI.\n- **Where**: otclient/data\n- **How**: Carregados pelo framework durante o bootstrap.\n- **Extends**: Adicionar assets e referenciar em módulos/UI.\n- **Risks**: Assets ausentes quebram UI/render.\n\n[Wiki](../README.md) > Assets\n\n# Assets"}
{"id": "assets/README.md::section-3", "system": "assets", "doc_path": "docs/wiki/assets/README.md", "type": "assets", "section": "Visão geral", "content": "## Visão geral\nAssets incluem imagens, sprites, fontes, sons e estilos usados pelo OTClient para renderização e UI."}
{"id": "assets/README.md::section-4", "system": "assets", "doc_path": "docs/wiki/assets/README.md", "type": "assets", "section": "Localização no repositório", "content": "## Localização no repositório\n- `otclient/data/` — imagens, fontes, sons, partículas, estilos e things."}
{"id": "assets/README.md::section-5", "system": "assets", "doc_path": "docs/wiki/assets/README.md", "type": "assets", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- `images/`, `cursors/`, `particles/` — recursos gráficos.\n- `fonts/`, `sounds/` — fontes e áudio.\n- `styles/` — estilos e definição visual (OTUI/OTML).\n- `things/` — assets de entidades do jogo."}
{"id": "assets/README.md::section-6", "system": "assets", "doc_path": "docs/wiki/assets/README.md", "type": "assets", "section": "Fluxo de execução (alto nível)", "content": "## Fluxo de execução (alto nível)\n- Assets são carregados pelo framework do cliente durante a inicialização e conforme módulos de UI são exibidos."}
{"id": "assets/README.md::section-7", "system": "assets", "doc_path": "docs/wiki/assets/README.md", "type": "assets", "section": "Integrações", "content": "## Integrações\n- **UI**: estilos e layouts em `otclient/data/styles/`.\n- **Cliente**: sprites e things usados no render do mapa e criaturas."}
{"id": "client/README.md::section-1", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Document", "content": "<!-- tags: - client - c++ - lua - ui priority: critical -->"}
{"id": "client/README.md::section-2", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Visão geral do OTClient, framework e módulos.\n- **Why**: Orienta renderização, UI e comunicação com servidor.\n- **Where**: otclient/src, otclient/modules, otclient/data\n- **How**: Explica bootstrap, módulos e integração via protocolo.\n- **Extends**: Módulos em otclient/modules e layouts em otclient/data/styles.\n- **Risks**: Mudanças em protocolo ou módulos críticos quebram login/jogo.\n\n[Wiki](../README.md) > Cliente\n\n# Cliente (OTClient)"}
{"id": "client/README.md::section-3", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Visão geral", "content": "## Visão geral\nO OTClient é o cliente gráfico responsável por renderização, UI, entrada do usuário e comunicação com o servidor. Ele possui um framework C++ e uma camada de módulos e scripts Lua para UI e funcionalidades."}
{"id": "client/README.md::section-4", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Papel no projeto", "content": "## Papel no projeto\n- Renderiza o mundo, criaturas e UI.\n- Envia ações e recebe atualizações do servidor.\n- Carrega módulos e scripts que estendem a interface e o gameplay do cliente."}
{"id": "client/README.md::section-5", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Localização no repositório", "content": "## Localização no repositório\n- Código principal: `otclient/src/`\n- Módulos: `otclient/modules/`\n- Assets/UI: `otclient/data/`\n- Mods: `otclient/mods/`\n- Configuração: `otclient/config.ini`, `otclient/otclientrc.lua`, `otclient/init.lua`"}
{"id": "client/README.md::section-6", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- `otclient/src/client/` — núcleo do cliente e entidades do jogo no cliente.\n- `otclient/src/framework/` — engine (core, graphics, input, net, sound, ui, luaengine).\n- `otclient/src/protobuf/` — mensagens protobuf (quando usado).\n- `otclient/modules/` — módulos de UI e gameplay (ex.: `game_*`, `client_*`).\n- `otclient/data/` — estilos, imagens, fontes, sons, things."}
{"id": "client/README.md::section-7", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Fluxo de execução (alto nível)", "content": "## Fluxo de execução (alto nível)\n1. **Inicialização**: entrada em `otclient/src/main.cpp` (ou `androidmain.cpp` no Android).\n2. **Framework**: inicializa subsistemas do framework (`otclient/src/framework/`).\n3. **Scripts**: carrega `otclient/init.lua` e módulos em `otclient/modules/`.\n4. **Conexão**: protocolo em `otclient/src/client/protocolgame*.cpp` comunica com o servidor."}
{"id": "client/README.md::section-8", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Exemplos práticos (do código)", "content": "## Exemplos práticos (do código)\n- **Arquivo de log do cliente**: o logger cria o arquivo no diretório de trabalho via `g_logger.setLogFile(...)` no bootstrap.\n  - Referência: `otclient/init.lua`.\n- **Módulo de inventário**: o módulo `game_inventory` manipula slots e atualiza UI conforme o estado do jogador.\n  - Referência: `otclient/modules/game_inventory/inventory.lua`.\n- **Transição de estado no jogo**: `Game::processGameStart()` ajusta FPS e agenda eventos de ping/conexão.\n  - Referência: `otclient/src/client/game.cpp`."}
{"id": "client/README.md::section-9", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: módulos não carregam**\n  - **Possível causa**: falha no carregamento de scripts ou dependências.\n  - **Onde investigar**: mensagens de erro são geradas no carregamento de módulos.\n- **Sintoma: cliente sem log**\n  - **Possível causa**: falha no `setLogFile` ou diretório de trabalho inválido.\n  - **Onde investigar**: configuração do logger em `otclient/init.lua`.\n- **Breakpoints sugeridos**\n  - `Game::processLogin` / `processGameStart` em `otclient/src/client/game.cpp`.\n  - Carregamento de módulos em `otclient/src/framework/core/module.cpp`."}
{"id": "client/README.md::section-10", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Pontos sensíveis**\n  - **Ciclo de jogo**: atualizações de conexão e eventos são agendadas no `Game`.\n  - **FPS**: o cliente ajusta alvo de FPS ao entrar/sair do jogo.\n- **Onde investigar**\n  - `otclient/src/client/game.cpp` (eventos de ping, FPS e estados)."}
{"id": "client/README.md::section-11", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Pontos de extensão e customização", "content": "## Pontos de extensão e customização\n- **Onde é seguro modificar**\n  - Módulos e layouts em `otclient/modules/`.\n  - Estilos e componentes em `otclient/data/styles/`.\n- **Onde exigir coordenação**\n  - Alterações no protocolo exigem alinhamento com o servidor e `protocolcodes`."}
{"id": "client/README.md::section-12", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "Integrações", "content": "## Integrações\n- **Servidor**: protocolos de rede em `otclient/src/client/protocolgame*.cpp`.\n- **UI/OTUI**: layouts e estilos em `otclient/data/styles/` e módulos em `otclient/modules/`.\n- **Assets**: sprites, fontes e sons em `otclient/data/`."}
{"id": "client/README.md::section-13", "system": "client", "doc_path": "docs/wiki/client/README.md", "type": "client", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Módulos em otclient/modules e estilos em otclient/data/styles.\n- **Use with caution**: Carregamento de módulos e integração com g_game.\n- **Do not modify**: Protocolos/opcodes sem sincronização com o servidor."}
{"id": "config/README.md::section-1", "system": "config", "doc_path": "docs/wiki/config/README.md", "type": "config", "section": "Document", "content": "<!-- tags: - config - server - client priority: high -->"}
{"id": "config/README.md::section-2", "system": "config", "doc_path": "docs/wiki/config/README.md", "type": "config", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Configurações de servidor e cliente.\n- **Why**: Parametriza runtime e comportamento.\n- **Where**: crystalserver/config.lua.dist, otclient/config.ini\n- **How**: Arquivos de config são lidos no bootstrap.\n- **Extends**: Adicionar chaves com suporte em código.\n- **Risks**: Config inválida causa falhas de inicialização.\n\n[Wiki](../README.md) > Configuração\n\n# Configuração"}
{"id": "config/README.md::section-3", "system": "config", "doc_path": "docs/wiki/config/README.md", "type": "config", "section": "Visão geral", "content": "## Visão geral\nConfigurações definem parâmetros de runtime do servidor e do cliente, além de registros de dados e regras via XML."}
{"id": "config/README.md::section-4", "system": "config", "doc_path": "docs/wiki/config/README.md", "type": "config", "section": "Localização no repositório", "content": "## Localização no repositório\n- **Servidor**: `crystalserver/config.lua.dist`, `crystalserver/src/config/`, `crystalserver/data/XML/`.\n- **Cliente**: `otclient/config.ini`, `otclient/otclientrc.lua`, `otclient/data/setup.otml`."}
{"id": "config/README.md::section-5", "system": "config", "doc_path": "docs/wiki/config/README.md", "type": "config", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- **Servidor**\n  - `config.lua.dist` — configuração principal (base).\n  - `src/config/` — carregamento e gestão dos valores.\n  - `data/XML/` — definições de grupos, vocações, eventos, outfits, etc.\n- **Cliente**\n  - `config.ini` — parâmetros gerais do cliente.\n  - `otclientrc.lua` — configurações em Lua para o cliente.\n  - `data/setup.otml` — configuração de setup e recursos."}
{"id": "config/README.md::section-6", "system": "config", "doc_path": "docs/wiki/config/README.md", "type": "config", "section": "Fluxo de execução (alto nível)", "content": "## Fluxo de execução (alto nível)\n- **Servidor**: configuração é carregada na inicialização e usada para parametrizar serviços, I/O e gameplay.\n- **Cliente**: configuração é lida no bootstrap para ajustar inicialização e UI."}
{"id": "config/README.md::section-7", "system": "config", "doc_path": "docs/wiki/config/README.md", "type": "config", "section": "Integrações", "content": "## Integrações\n- **Servidor**: influencia rede, banco, sistemas de jogo e scripts.\n- **Cliente**: influencia carregamento de módulos, assets e comportamento visual."}
{"id": "game-systems/README.md::section-1", "system": "README.md", "doc_path": "docs/wiki/game-systems/README.md", "type": "game-system", "section": "Document", "content": "<!-- tags: - game-systems - server - lua priority: high -->"}
{"id": "game-systems/README.md::section-2", "system": "README.md", "doc_path": "docs/wiki/game-systems/README.md", "type": "game-system", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Índice dos sistemas de gameplay documentados.\n- **Why**: Agrupa sistemas críticos do jogo.\n- **Where**: docs/wiki/game-systems\n- **How**: Links para páginas por sistema.\n- **Extends**: Adicionar novos sistemas com README dedicado.\n- **Risks**: Sistema sem página reduz cobertura documental.\n\n[Wiki](../README.md) > Sistemas de jogo\n\n# Sistemas de jogo"}
{"id": "game-systems/README.md::section-3", "system": "README.md", "doc_path": "docs/wiki/game-systems/README.md", "type": "game-system", "section": "Visão geral", "content": "## Visão geral\nEsta seção descreve os sistemas de gameplay do servidor e as contrapartes relevantes no cliente. Cada sistema possui uma página dedicada com visão geral, arquivos envolvidos e pontos de extensão."}
{"id": "game-systems/README.md::section-4", "system": "README.md", "doc_path": "docs/wiki/game-systems/README.md", "type": "game-system", "section": "Sistemas documentados", "content": "## Sistemas documentados\n- [Combate](combate/README.md)\n- [Criaturas e NPCs](criaturas-npcs/README.md)\n- [Itens](itens/README.md)\n- [Magias e runas](magias-runas/README.md)\n- [Mapas](mapas/README.md)\n- [Eventos](eventos/README.md)\n- [Skills](skills/README.md)\n- [Economia](economia/README.md)"}
{"id": "game-systems/README.md::section-5", "system": "README.md", "doc_path": "docs/wiki/game-systems/README.md", "type": "game-system", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Adicionar novos sistemas com README dedicado.\n- **Use with caution**: Sistemas que impactam protocolo/combate.\n- **Do not modify**: Remover páginas de sistemas sem atualizar índices."}
{"id": "game-systems/combate/README.md::section-1", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "Document", "content": "<!-- tags: - combat - server - lua priority: high -->"}
{"id": "game-systems/combate/README.md::section-2", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Sistema de combate e efeitos.\n- **Why**: Centraliza dano e interações de ataque.\n- **Where**: crystalserver/src/creatures/combat, data/scripts/spells\n- **How**: Combina núcleo C++ e scripts Lua.\n- **Extends**: Spells/runes/weapons em Lua.\n- **Risks**: Scripts incorretos geram dano/efeitos inválidos.\n\n[Wiki](../../README.md) > [Sistemas de jogo](../README.md) > Combate\n\n# Combate"}
{"id": "game-systems/combate/README.md::section-3", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "Visão geral", "content": "## Visão geral\nO sistema de combate processa dano, efeitos e interações de ataque entre entidades do jogo. Ele vive principalmente no servidor, com reflexos no cliente para apresentação visual."}
{"id": "game-systems/combate/README.md::section-4", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "Arquivos envolvidos", "content": "## Arquivos envolvidos\n- **Servidor**: `crystalserver/src/creatures/combat/`.\n- **Scripts**: `crystalserver/data/scripts/spells/`, `crystalserver/data/scripts/runes/`, `crystalserver/data/scripts/weapons/`.\n- **Cliente**: visualização em `otclient/src/client/` (criaturas, efeitos, mísseis)."}
{"id": "game-systems/combate/README.md::section-5", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- Núcleo de combate em C++ dentro de `crystalserver/src/creatures/combat/`.\n- Scripts Lua definem comportamento de magias, runas e armas."}
{"id": "game-systems/combate/README.md::section-6", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "Fluxo geral", "content": "## Fluxo geral\n1. Ação de combate é recebida via protocolo.\n2. O servidor processa regras e aplica efeitos.\n3. O cliente recebe atualizações e renderiza animações/efeitos."}
{"id": "game-systems/combate/README.md::section-7", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "Exemplo prático (do código)", "content": "## Exemplo prático (do código)\n- `crystalserver/data/scripts/spells/#example.lua` mostra a criação de um `Combat()` com parâmetros e o registro de uma runa."}
{"id": "game-systems/combate/README.md::section-8", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: magia/runa não causa efeito**\n  - **Possível causa**: script não carregado ou erro de execução.\n  - **Onde investigar**: scripts em `crystalserver/data/scripts/spells/` e logs do carregamento de scripts."}
{"id": "game-systems/combate/README.md::section-9", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Ponto sensível**: alto volume de efeitos/combate pode aumentar carga do servidor, especialmente quando scripts executam lógica extra."}
{"id": "game-systems/combate/README.md::section-10", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "Pontos de extensão", "content": "## Pontos de extensão\n- Scripts Lua em `crystalserver/data/scripts/spells/`, `runes/` e `weapons/`.\n- Eventos e callbacks em `crystalserver/data/events/`."}
{"id": "game-systems/combate/README.md::section-11", "system": "combate", "doc_path": "docs/wiki/game-systems/combate/README.md", "type": "game-system", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts Lua e dados ligados ao sistema.\n- **Use with caution**: Interações que afetam combate/protocolo.\n- **Do not modify**: Alterações sem revisar impactos no cliente."}
{"id": "game-systems/criaturas-npcs/README.md::section-1", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "Document", "content": "<!-- tags: - creatures - npcs - server - lua priority: high -->"}
{"id": "game-systems/criaturas-npcs/README.md::section-2", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Entidades vivas (players, monsters, NPCs).\n- **Why**: Define comportamento e interação.\n- **Where**: crystalserver/src/creatures, data/scripts/npcs\n- **How**: Servidor gerencia estado e cliente renderiza.\n- **Extends**: Scripts de NPCs e creaturescripts.\n- **Risks**: Lógica de NPCs pode impactar desempenho.\n\n[Wiki](../../README.md) > [Sistemas de jogo](../README.md) > Criaturas e NPCs\n\n# Criaturas e NPCs"}
{"id": "game-systems/criaturas-npcs/README.md::section-3", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "Visão geral", "content": "## Visão geral\nEste sistema define entidades vivas do jogo (jogadores, monstros e NPCs), suas propriedades e interações. A maior parte reside no servidor, com representação no cliente."}
{"id": "game-systems/criaturas-npcs/README.md::section-4", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "Arquivos envolvidos", "content": "## Arquivos envolvidos\n- **Servidor**: `crystalserver/src/creatures/` (players, monsters, npcs, interactions).\n- **Scripts**: `crystalserver/data/scripts/npcs/` e `crystalserver/data/npclib/`.\n- **Cliente**: entidades em `otclient/src/client/creature*.cpp` e `otclient/src/client/creatures.*`."}
{"id": "game-systems/criaturas-npcs/README.md::section-5", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- `players/`, `monsters/`, `npcs/` — implementação das entidades no servidor.\n- `appearance/` e `interactions/` — suporte a aparência e interações."}
{"id": "game-systems/criaturas-npcs/README.md::section-6", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "Fluxo geral", "content": "## Fluxo geral\n1. O servidor carrega definições e instâncias de criaturas.\n2. Eventos e scripts de NPCs são acionados por interações do jogador.\n3. O cliente recebe atualizações e renderiza entidades na tela."}
{"id": "game-systems/criaturas-npcs/README.md::section-7", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "Exemplo prático (do código)", "content": "## Exemplo prático (do código)\n- `crystalserver/data/scripts/npcs/task_master.lua` define um NPC com `onSay` e registra o tipo via `npcType:register(...)`."}
{"id": "game-systems/criaturas-npcs/README.md::section-8", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: NPC não responde**\n  - **Possível causa**: script não carregado ou evento não acionado.\n  - **Onde investigar**: scripts em `crystalserver/data/scripts/npcs/` e bibliotecas em `crystalserver/data/npclib/`."}
{"id": "game-systems/criaturas-npcs/README.md::section-9", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Ponto sensível**: scripts de NPCs com lógica pesada podem aumentar carga em áreas com muitos jogadores."}
{"id": "game-systems/criaturas-npcs/README.md::section-10", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "Pontos de extensão", "content": "## Pontos de extensão\n- Scripts de NPCs em `crystalserver/data/scripts/npcs/`.\n- Eventos de criatura em `crystalserver/data/scripts/creaturescripts/`."}
{"id": "game-systems/criaturas-npcs/README.md::section-11", "system": "criaturas-npcs", "doc_path": "docs/wiki/game-systems/criaturas-npcs/README.md", "type": "game-system", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts Lua e dados ligados ao sistema.\n- **Use with caution**: Interações que afetam combate/protocolo.\n- **Do not modify**: Alterações sem revisar impactos no cliente."}
{"id": "game-systems/economia/README.md::section-1", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "Document", "content": "<!-- tags: - economy - server - client priority: high -->"}
{"id": "game-systems/economia/README.md::section-2", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Banco e market do jogo.\n- **Why**: Suporta transações e economia.\n- **Where**: crystalserver/src/game/bank, src/io/iomarket.*\n- **How**: Servidor consulta e grava ofertas.\n- **Extends**: NPCs e scripts de economia.\n- **Risks**: Queries custosas e inconsistência de dados.\n\n[Wiki](../../README.md) > [Sistemas de jogo](../README.md) > Economia\n\n# Economia"}
{"id": "game-systems/economia/README.md::section-3", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "Visão geral", "content": "## Visão geral\nA economia engloba sistemas como banco e market, controlando transações e persistência de ofertas."}
{"id": "game-systems/economia/README.md::section-4", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "Arquivos envolvidos", "content": "## Arquivos envolvidos\n- **Servidor**: `crystalserver/src/game/bank/`.\n- **Persistência**: `crystalserver/src/io/iomarket.*` e `crystalserver/schema.sql`.\n- **Config**: `crystalserver/src/config/` (parâmetros de market).\n- **Cliente**: `otclient/modules/game_market/`."}
{"id": "game-systems/economia/README.md::section-5", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- Banco e lógica econômica no servidor.\n- Market integrado à camada de I/O e banco de dados."}
{"id": "game-systems/economia/README.md::section-6", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "Fluxo geral", "content": "## Fluxo geral\n1. Jogador acessa funcionalidades de economia (ex.: market/banco).\n2. Servidor registra e consulta ofertas via I/O.\n3. Cliente exibe informações em módulos específicos."}
{"id": "game-systems/economia/README.md::section-7", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "Exemplo prático (do código)", "content": "## Exemplo prático (do código)\n- `IOMarket::getActiveOffers` consulta ofertas no banco e aplica `marketOfferDuration` conforme config."}
{"id": "game-systems/economia/README.md::section-8", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: market não retorna ofertas**\n  - **Possível causa**: query não retorna resultados ou configuração inválida.\n  - **Onde investigar**: `crystalserver/src/io/iomarket.cpp`."}
{"id": "game-systems/economia/README.md::section-9", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Ponto sensível**: consultas de market podem ser custosas sem índices adequados."}
{"id": "game-systems/economia/README.md::section-10", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "Pontos de extensão", "content": "## Pontos de extensão\n- Scripts de NPCs podem expor serviços econômicos em `crystalserver/data/scripts/npcs/`."}
{"id": "game-systems/economia/README.md::section-11", "system": "economia", "doc_path": "docs/wiki/game-systems/economia/README.md", "type": "game-system", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts Lua e dados ligados ao sistema.\n- **Use with caution**: Interações que afetam combate/protocolo.\n- **Do not modify**: Alterações sem revisar impactos no cliente."}
{"id": "game-systems/eventos/README.md::section-1", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "Document", "content": "<!-- tags: - events - lua - server priority: high -->"}
{"id": "game-systems/eventos/README.md::section-2", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Eventos e callbacks do jogo.\n- **Why**: Permite lógica reativa via scripts.\n- **Where**: data/events, data/scripts\n- **How**: Eventos registram handlers e disparam scripts.\n- **Extends**: Adicionar callbacks em scripts.\n- **Risks**: Eventos globais pesados degradam performance.\n\n[Wiki](../../README.md) > [Sistemas de jogo](../README.md) > Eventos\n\n# Eventos"}
{"id": "game-systems/eventos/README.md::section-3", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "Visão geral", "content": "## Visão geral\nEventos conectam ações do jogo a scripts Lua, permitindo lógica customizada para diversas situações (globais, de criaturas, de ações e movimentos)."}
{"id": "game-systems/eventos/README.md::section-4", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "Arquivos envolvidos", "content": "## Arquivos envolvidos\n- **Servidor**: `crystalserver/data/events/` e `crystalserver/data/scripts/`.\n- **XML**: `crystalserver/data/XML/events.xml`."}
{"id": "game-systems/eventos/README.md::section-5", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- `events.xml` registra eventos e seus handlers.\n- Scripts Lua implementam as rotinas chamadas pelos eventos."}
{"id": "game-systems/eventos/README.md::section-6", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "Fluxo geral", "content": "## Fluxo geral\n1. O servidor carrega os registros de eventos.\n2. Quando o evento ocorre, o script associado é executado."}
{"id": "game-systems/eventos/README.md::section-7", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "Exemplo prático (do código)", "content": "## Exemplo prático (do código)\n- `crystalserver/data/XML/events.xml` lista eventos como `Player::onGainExperience` e `Player::onTradeRequest`."}
{"id": "game-systems/eventos/README.md::section-8", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: evento não dispara**\n  - **Possível causa**: evento desabilitado no XML ou script ausente.\n  - **Onde investigar**: `events.xml` e scripts associados."}
{"id": "game-systems/eventos/README.md::section-9", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Ponto sensível**: eventos globais frequentes podem gerar overhead se scripts tiverem lógica pesada."}
{"id": "game-systems/eventos/README.md::section-10", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "Pontos de extensão", "content": "## Pontos de extensão\n- `crystalserver/data/events/` e `crystalserver/data/scripts/eventcallbacks/`.\n- Scripts em `creaturescripts/`, `globalevents/`, `actions/` e `movements/`."}
{"id": "game-systems/eventos/README.md::section-11", "system": "eventos", "doc_path": "docs/wiki/game-systems/eventos/README.md", "type": "game-system", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts Lua e dados ligados ao sistema.\n- **Use with caution**: Interações que afetam combate/protocolo.\n- **Do not modify**: Alterações sem revisar impactos no cliente."}
{"id": "game-systems/itens/README.md::section-1", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "Document", "content": "<!-- tags: - items - server - lua priority: high -->"}
{"id": "game-systems/itens/README.md::section-2", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Tipos e propriedades de itens.\n- **Why**: Suporta inventário, mapa e interações.\n- **Where**: crystalserver/src/items, data/items\n- **How**: Dados XML + scripts de ações/movimentos.\n- **Extends**: Adicionar itens em items.xml e scripts.\n- **Risks**: Itens inconsistentes quebram gameplay.\n\n[Wiki](../../README.md) > [Sistemas de jogo](../README.md) > Itens\n\n# Itens"}
{"id": "game-systems/itens/README.md::section-3", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "Visão geral", "content": "## Visão geral\nO sistema de itens define tipos, propriedades e comportamento de itens no jogo. Ele integra C++ no servidor, dados e scripts."}
{"id": "game-systems/itens/README.md::section-4", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "Arquivos envolvidos", "content": "## Arquivos envolvidos\n- **Servidor**: `crystalserver/src/items/`.\n- **Dados**: `crystalserver/data/items/`.\n- **Scripts**: `crystalserver/data/scripts/actions/` e `crystalserver/data/scripts/movements/`.\n- **Cliente**: `otclient/src/client/item*.cpp` e `otclient/data/things/`."}
{"id": "game-systems/itens/README.md::section-5", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- Tipos de item no servidor em `crystalserver/src/items/`.\n- Definições e propriedades em `crystalserver/data/items/`.\n- Ações/movimentos por scripts Lua."}
{"id": "game-systems/itens/README.md::section-6", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "Fluxo geral", "content": "## Fluxo geral\n1. Itens são carregados durante a inicialização do servidor.\n2. Ações de uso/movimento disparam scripts específicos.\n3. O cliente renderiza itens no mapa e inventário."}
{"id": "game-systems/itens/README.md::section-7", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "Exemplo prático (do código)", "content": "## Exemplo prático (do código)\n- `crystalserver/data/items/items.xml` contém itens com atributos, incluindo itens com campos como `primarytype`, `weight` e `script`."}
{"id": "game-systems/itens/README.md::section-8", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: item sem propriedades**\n  - **Possível causa**: definição ausente ou atributos faltando em `items.xml`.\n  - **Onde investigar**: `crystalserver/data/items/items.xml` e scripts em `actions/` e `movements/`."}
{"id": "game-systems/itens/README.md::section-9", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Ponto sensível**: itens com eventos frequentes (stepin/stepout) podem gerar muitas chamadas de script."}
{"id": "game-systems/itens/README.md::section-10", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "Pontos de extensão", "content": "## Pontos de extensão\n- Scripts em `crystalserver/data/scripts/actions/` e `movements/`.\n- Dados de item em `crystalserver/data/items/`."}
{"id": "game-systems/itens/README.md::section-11", "system": "itens", "doc_path": "docs/wiki/game-systems/itens/README.md", "type": "game-system", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts Lua e dados ligados ao sistema.\n- **Use with caution**: Interações que afetam combate/protocolo.\n- **Do not modify**: Alterações sem revisar impactos no cliente."}
{"id": "game-systems/magias-runas/README.md::section-1", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "Document", "content": "<!-- tags: - spells - runes - lua - combat priority: high -->"}
{"id": "game-systems/magias-runas/README.md::section-2", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Magias e runas do jogo.\n- **Why**: Define habilidades e efeitos mágicos.\n- **Where**: data/scripts/spells, data/scripts/runes\n- **How**: Scripts Lua acionados pelo combate.\n- **Extends**: Adicionar spells/runes em Lua.\n- **Risks**: Requisitos incorretos causam falhas de uso.\n\n[Wiki](../../README.md) > [Sistemas de jogo](../README.md) > Magias e runas\n\n# Magias e runas"}
{"id": "game-systems/magias-runas/README.md::section-3", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "Visão geral", "content": "## Visão geral\nMagias e runas são implementadas principalmente via scripts Lua no servidor, com suporte de combate e efeitos visuais no cliente."}
{"id": "game-systems/magias-runas/README.md::section-4", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "Arquivos envolvidos", "content": "## Arquivos envolvidos\n- **Scripts**: `crystalserver/data/scripts/spells/` e `crystalserver/data/scripts/runes/`.\n- **Servidor**: integração em `crystalserver/src/creatures/combat/`.\n- **Cliente**: efeitos em `otclient/src/client/effect*.cpp` e `otclient/src/client/missile*.cpp`."}
{"id": "game-systems/magias-runas/README.md::section-5", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- Definições e lógica de magias em scripts Lua.\n- Sistema de combate aplica efeitos e validações."}
{"id": "game-systems/magias-runas/README.md::section-6", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "Fluxo geral", "content": "## Fluxo geral\n1. Ação de cast é enviada pelo cliente.\n2. O servidor executa a magia via scripts e regras de combate.\n3. O cliente renderiza efeitos/partículas recebidos."}
{"id": "game-systems/magias-runas/README.md::section-7", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "Exemplo prático (do código)", "content": "## Exemplo prático (do código)\n- `crystalserver/data/scripts/spells/#example.lua` registra uma runa e define um `Combat()` com parâmetros de cura/efeito."}
{"id": "game-systems/magias-runas/README.md::section-8", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: magia não executa**\n  - **Possível causa**: erro no script ou requisitos de nível/magia não atendidos.\n  - **Onde investigar**: `crystalserver/data/scripts/spells/` e logs de scripts."}
{"id": "game-systems/magias-runas/README.md::section-9", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Ponto sensível**: magias em área e efeitos visuais podem gerar maior volume de mensagens para o cliente."}
{"id": "game-systems/magias-runas/README.md::section-10", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "Pontos de extensão", "content": "## Pontos de extensão\n- Scripts de magias e runas em `crystalserver/data/scripts/spells/` e `runes/`.\n- Eventos em `crystalserver/data/events/`."}
{"id": "game-systems/magias-runas/README.md::section-11", "system": "magias-runas", "doc_path": "docs/wiki/game-systems/magias-runas/README.md", "type": "game-system", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts Lua e dados ligados ao sistema.\n- **Use with caution**: Interações que afetam combate/protocolo.\n- **Do not modify**: Alterações sem revisar impactos no cliente."}
{"id": "game-systems/mapas/README.md::section-1", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "Document", "content": "<!-- tags: - maps - server - client priority: high -->"}
{"id": "game-systems/mapas/README.md::section-2", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Carregamento e atualização de mapa.\n- **Why**: Mantém mundo persistente e renderização.\n- **Where**: crystalserver/src/map, otclient/src/client/map*\n- **How**: Servidor carrega mapa e envia updates.\n- **Extends**: Scripts de movimento e eventos de mapa.\n- **Risks**: Mapas inválidos afetam spawn e render.\n\n[Wiki](../../README.md) > [Sistemas de jogo](../README.md) > Mapas\n\n# Mapas"}
{"id": "game-systems/mapas/README.md::section-3", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "Visão geral", "content": "## Visão geral\nO sistema de mapas gerencia o carregamento, armazenamento e consulta do mundo. O servidor mantém o estado do mapa e o cliente renderiza as camadas visuais."}
{"id": "game-systems/mapas/README.md::section-4", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "Arquivos envolvidos", "content": "## Arquivos envolvidos\n- **Servidor**: `crystalserver/src/map/`.\n- **Cliente**: `otclient/src/client/map*.cpp`, `otclient/src/client/minimap*.cpp`."}
{"id": "game-systems/mapas/README.md::section-5", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- Carregamento e representação de tiles e setores no servidor.\n- Renderização e minimapa no cliente."}
{"id": "game-systems/mapas/README.md::section-6", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "Fluxo geral", "content": "## Fluxo geral\n1. O servidor carrega o mapa durante a inicialização.\n2. Atualizações do mapa são enviadas ao cliente via protocolo.\n3. O cliente renderiza tiles e minimapa."}
{"id": "game-systems/mapas/README.md::section-7", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "Exemplo prático (do código)", "content": "## Exemplo prático (do código)\n- `CrystalServer::loadMaps()` carrega o mapa principal e mapas customizados quando habilitado."}
{"id": "game-systems/mapas/README.md::section-8", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: mapa não carrega**\n  - **Possível causa**: caminho de mapa inválido ou erro de carregamento.\n  - **Onde investigar**: `CrystalServer::loadMaps()` e configuração de mapa."}
{"id": "game-systems/mapas/README.md::section-9", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Ponto sensível**: atualizações frequentes de mapa geram mais tráfego de rede e renderização no cliente."}
{"id": "game-systems/mapas/README.md::section-10", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "Pontos de extensão", "content": "## Pontos de extensão\n- Scripts de movimentos em `crystalserver/data/scripts/movements/` interagem com tiles.\n- Eventos de mapa podem ser registrados via `crystalserver/data/events/`."}
{"id": "game-systems/mapas/README.md::section-11", "system": "mapas", "doc_path": "docs/wiki/game-systems/mapas/README.md", "type": "game-system", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts Lua e dados ligados ao sistema.\n- **Use with caution**: Interações que afetam combate/protocolo.\n- **Do not modify**: Alterações sem revisar impactos no cliente."}
{"id": "game-systems/skills/README.md::section-1", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "Document", "content": "<!-- tags: - skills - server - client priority: high -->"}
{"id": "game-systems/skills/README.md::section-2", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Skills e progressão do jogador.\n- **Why**: Define atributos persistentes.\n- **Where**: crystalserver/src/creatures/players, schema.sql\n- **How**: Servidor atualiza e cliente exibe.\n- **Extends**: Hooks de creaturescripts para progressão.\n- **Risks**: Persistência incorreta afeta progressão.\n\n[Wiki](../../README.md) > [Sistemas de jogo](../README.md) > Skills\n\n# Skills"}
{"id": "game-systems/skills/README.md::section-3", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "Visão geral", "content": "## Visão geral\nSkills representam atributos e progressão do personagem. Elas são persistidas no servidor e refletidas no cliente."}
{"id": "game-systems/skills/README.md::section-4", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "Arquivos envolvidos", "content": "## Arquivos envolvidos\n- **Servidor**: `crystalserver/src/creatures/players/` e `crystalserver/src/io/`.\n- **Banco**: `crystalserver/schema.sql` (colunas de skills).\n- **Cliente**: módulo `otclient/modules/game_skills/`."}
{"id": "game-systems/skills/README.md::section-5", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- Skills são mantidas nos dados do jogador no servidor.\n- Persistência via camada de I/O."}
{"id": "game-systems/skills/README.md::section-6", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "Fluxo geral", "content": "## Fluxo geral\n1. O servidor carrega skills do banco ao logar.\n2. Atualizações são aplicadas conforme gameplay.\n3. O cliente exibe informações no módulo de skills."}
{"id": "game-systems/skills/README.md::section-7", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "Exemplo prático (do código)", "content": "## Exemplo prático (do código)\n- `iologindata_save_player.cpp` grava campos como `skill_fist`, `skill_sword` e `skill_dist` no banco."}
{"id": "game-systems/skills/README.md::section-8", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: skill não atualiza**\n  - **Possível causa**: falha na persistência ou atualização do jogador.\n  - **Onde investigar**: camada de I/O em `crystalserver/src/io/`."}
{"id": "game-systems/skills/README.md::section-9", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Ponto sensível**: gravações frequentes de skills podem aumentar carga de I/O."}
{"id": "game-systems/skills/README.md::section-10", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "Pontos de extensão", "content": "## Pontos de extensão\n- Scripts podem reagir a eventos de criaturas em `crystalserver/data/scripts/creaturescripts/`."}
{"id": "game-systems/skills/README.md::section-11", "system": "skills", "doc_path": "docs/wiki/game-systems/skills/README.md", "type": "game-system", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts Lua e dados ligados ao sistema.\n- **Use with caution**: Interações que afetam combate/protocolo.\n- **Do not modify**: Alterações sem revisar impactos no cliente."}
{"id": "glossary/README.md::section-1", "system": "glossary", "doc_path": "docs/wiki/glossary/README.md", "type": "glossary", "section": "Document", "content": "<!-- tags: - glossary - docs priority: medium -->"}
{"id": "glossary/README.md::section-2", "system": "glossary", "doc_path": "docs/wiki/glossary/README.md", "type": "glossary", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Glossário de termos do servidor, cliente e protocolo.\n- **Why**: Padroniza conceitos para busca semântica e RAG.\n- **Where**: docs/wiki/glossary/README.md\n- **How**: Lista termos com definições curtas e referências cruzadas.\n- **Extends**: Adicionar termos novos conforme módulos/sistemas crescem.\n- **Risks**: Termos ambíguos geram respostas inconsistentes.\n\n[Wiki](../README.md) > Glossário\n\n# Glossário orientado a IA"}
{"id": "glossary/README.md::section-3", "system": "glossary", "doc_path": "docs/wiki/glossary/README.md", "type": "glossary", "section": "Termos gerais", "content": "## Termos gerais\n- **CrystalServer**: servidor Open Tibia deste repositório. (Ver [Servidor](../server/README.md).)\n- **OTClient**: cliente customizado do jogo. (Ver [Cliente](../client/README.md).)\n- **OpCode**: identificador numérico de mensagens do protocolo. (Ver [Protocolos](../protocol/README.md).)"}
{"id": "glossary/README.md::section-4", "system": "glossary", "doc_path": "docs/wiki/glossary/README.md", "type": "glossary", "section": "Termos de protocolo", "content": "## Termos de protocolo\n- **ProtocolLogin**: protocolo de login do servidor (`protocollogin.*`).\n- **ProtocolStatus**: protocolo de status do servidor (`protocolstatus.*`).\n- **ProtocolGame**: protocolo de sessão de jogo (`protocolgame.*`).\n- **MessageMode**: modo de mensagem do chat/feedback no cliente."}
{"id": "glossary/README.md::section-5", "system": "glossary", "doc_path": "docs/wiki/glossary/README.md", "type": "glossary", "section": "Termos do OTClient", "content": "## Termos do OTClient\n- **OTUI/OTML**: formatos de layout e estilo da UI.\n- **Module**: unidade carregável do cliente (ex.: `game_*`, `client_*`).\n- **g_game**: facade do estado do jogo no cliente."}
{"id": "glossary/README.md::section-6", "system": "glossary", "doc_path": "docs/wiki/glossary/README.md", "type": "glossary", "section": "Termos do CrystalServer", "content": "## Termos do CrystalServer\n- **Datapack**: conjunto de dados e scripts em `crystalserver/data*`.\n- **Creature**: entidade viva no servidor (player, monster, NPC).\n- **CreatureScript**: script Lua que responde a eventos de criatura."}
{"id": "governance/README.md::section-1", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Document", "content": "<!-- tags: - governance - docs priority: high -->"}
{"id": "governance/README.md::section-2", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Regras e padrões da wiki.\n- **Why**: Garante consistência e sustentabilidade.\n- **Where**: docs/wiki/governance\n- **How**: Define padrões, links, e processo de atualização.\n- **Extends**: Adicionar regras e processos.\n- **Risks**: Quebra de padrão gera documentação inconsistente.\n\n[Wiki](../README.md) > Governança\n\n# Governança da Wiki"}
{"id": "governance/README.md::section-3", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Objetivo", "content": "## Objetivo\nDefinir padrões e processos para manter a wiki consistente, atualizada e escalável conforme o projeto evolui."}
{"id": "governance/README.md::section-4", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Padrões de documentação", "content": "## Padrões de documentação\n- **Formato**: Markdown com títulos claros (`##`, `###`) e listas para estrutura.\n- **Escopo**: documentar o que existe no repositório; evitar suposições.\n- **Exemplos**: usar trechos pequenos, reais e referenciados por arquivo.\n- **Citações**: toda afirmação factual deve ter referência a arquivo real."}
{"id": "governance/README.md::section-5", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Convenções de nomes", "content": "## Convenções de nomes\n- Pastas e arquivos em **kebab-case**.\n- Nomes de sistema iguais aos usados no código (ex.: `protocol`, `game-systems/combate`).\n- README principal de cada seção em `README.md`."}
{"id": "governance/README.md::section-6", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Como adicionar novos sistemas", "content": "## Como adicionar novos sistemas\n1. Criar pasta em `docs/wiki/game-systems/<nome>/`.\n2. Adicionar `README.md` com: visão geral, arquivos envolvidos, fluxo geral, pontos de extensão.\n3. Incluir o novo sistema nos índices:\n   - `docs/wiki/README.md`\n   - `docs/wiki/INDICES.md`\n4. Se houver dependência crítica, registrar no roadmap (`docs/wiki/roadmap.md`)."}
{"id": "governance/README.md::section-7", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Como atualizar páginas existentes", "content": "## Como atualizar páginas existentes\n- Preferir **edições incrementais**, mantendo histórico das referências.\n- Sempre atualizar **links de navegação** quando um documento novo é criado.\n- Se um caminho do repositório mudar, atualizar todos os links em backticks."}
{"id": "governance/README.md::section-8", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Regras para links e breadcrumbs", "content": "## Regras para links e breadcrumbs\n- Breadcrumbs no topo da página: `[Wiki](../README.md) > Seção`.\n- Links sempre relativos ao documento atual.\n- Evitar links quebrados: validar após mudanças estruturais."}
{"id": "governance/README.md::section-9", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Política para evitar arquivos órfãos", "content": "## Política para evitar arquivos órfãos\n- Todo arquivo de documentação deve ser linkado a partir do hub ou índices.\n- Todo sistema crítico deve ter **pelo menos uma página dedicada**.\n- Documentos novos devem ser incluídos no índice apropriado."}
{"id": "governance/README.md::section-10", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Detecção de órfãos", "content": "## Detecção de órfãos\n- Relatório de órfãos: `docs/wiki/governance/orphans.md`.\n- Revisar o relatório a cada ciclo de documentação."}
{"id": "governance/README.md::section-11", "system": "governance", "doc_path": "docs/wiki/governance/README.md", "type": "governance", "section": "Automação e manutenção", "content": "## Automação e manutenção\n- Plano de atualização e scripts sugeridos em `docs/wiki/governance/automation.md`."}
{"id": "governance/automation.md::section-1", "system": "governance", "doc_path": "docs/wiki/governance/automation.md", "type": "governance", "section": "Document", "content": "[Wiki](../README.md) > [Governança](README.md) > Automação\n\n# Automação de atualização da wiki"}
{"id": "governance/automation.md::section-2", "system": "governance", "doc_path": "docs/wiki/governance/automation.md", "type": "governance", "section": "Objetivo", "content": "## Objetivo\nDefinir um fluxo simples e sustentável para manter métricas, detectar mudanças relevantes e evitar documentação desatualizada."}
{"id": "governance/automation.md::section-3", "system": "governance", "doc_path": "docs/wiki/governance/automation.md", "type": "governance", "section": "Scripts propostos (não implementados)", "content": "## Scripts propostos (não implementados)\n> Estes scripts são descritos para padronizar a manutenção. A implementação pode ser feita futuramente em `tools/`.\n\n### 1) `wiki-metrics`\n- **Função**: atualizar `docs/wiki/METRICAS.md`.\n- **Saídas**:\n  - contagem de arquivos/pastas do repositório;\n  - número de páginas da wiki;\n  - contagem de referências (paths em backticks).\n\n### 2) `wiki-orphans`\n- **Função**: detectar caminhos não referenciados pela wiki.\n- **Saídas**:\n  - relatório em `docs/wiki/governance/orphans.md`;\n  - classificação (crítico/legado/assets/scripts);\n  - sugestões de onde linkar.\n\n### 3) `wiki-diff-watch`\n- **Função**: listar mudanças relevantes (ex.: alterações em `crystalserver/src`, `otclient/src`, `data/`).\n- **Saídas**:\n  - relatório de arquivos alterados para revisão manual da documentação."}
{"id": "governance/automation.md::section-4", "system": "governance", "doc_path": "docs/wiki/governance/automation.md", "type": "governance", "section": "Workflow manual recomendado", "content": "## Workflow manual recomendado\n1. Executar `wiki-metrics` após mudanças significativas.\n2. Atualizar páginas impactadas.\n3. Executar `wiki-orphans` para validar cobertura.\n4. Registrar pendências no `docs/wiki/roadmap.md`."}
{"id": "governance/automation.md::section-5", "system": "governance", "doc_path": "docs/wiki/governance/automation.md", "type": "governance", "section": "Integração futura (CI)", "content": "## Integração futura (CI)\n- Pipeline simples em CI:\n  - rodar scripts `wiki-metrics` e `wiki-orphans`;\n  - falhar o build se houver novos órfãos críticos."}
{"id": "governance/automation.md::section-6", "system": "governance", "doc_path": "docs/wiki/governance/automation.md", "type": "governance", "section": "Guardrails", "content": "## Guardrails\n- Não automatizar mudanças de conteúdo sem revisão humana.\n- A automação deve produzir **relatórios**, não alterar páginas diretamente."}
{"id": "governance/orphans.md::section-1", "system": "governance", "doc_path": "docs/wiki/governance/orphans.md", "type": "governance", "section": "Document", "content": "[Wiki](../README.md) > [Governança](README.md) > Órfãos\n\n# Relatório de órfãos (snapshot)"}
{"id": "governance/orphans.md::section-2", "system": "governance", "doc_path": "docs/wiki/governance/orphans.md", "type": "governance", "section": "Metodologia", "content": "## Metodologia\n- Foi feita a varredura das referências em backticks dentro da wiki.\n- Pastas relevantes do código foram comparadas com as referências.\n- O objetivo é indicar **áreas não citadas** na wiki atual.\n\n> **Nota**: este relatório não substitui uma análise semântica do conteúdo, apenas indica ausência de links."}
{"id": "governance/orphans.md::section-3", "system": "governance", "doc_path": "docs/wiki/governance/orphans.md", "type": "governance", "section": "Órfãos detectados (por área)", "content": "## Órfãos detectados (por área)\n\n### CrystalServer (`crystalserver/src`)\n- **Crítico**\n  - `crystalserver/src/enums/` — sugerir link em `docs/wiki/server/README.md` (seção de estrutura).\n  - `crystalserver/src/utils/` — sugerir link em `docs/wiki/server/README.md`.\n- **Legado/apoio**\n  - `crystalserver/src/lib/` — sugerir link em `docs/wiki/server/README.md`.\n  - `crystalserver/src/kv/` — sugerir link em `docs/wiki/server/README.md`.\n\n### OTClient (`otclient/src`)\n- **Apoio**\n  - `otclient/src/tools/` — sugerir link em `docs/wiki/client/README.md` ou `docs/wiki/tools/README.md`.\n\n### Scripts (`crystalserver/data/scripts`)\n- **Scripts**\n  - `crystalserver/data/scripts/globalevents/` — sugerir link em `docs/wiki/scripts/README.md` ou `docs/wiki/game-systems/eventos/README.md`.\n  - `crystalserver/data/scripts/lib/` — sugerir link em `docs/wiki/scripts/README.md`.\n  - `crystalserver/data/scripts/systems/` — sugerir link em `docs/wiki/scripts/README.md`.\n  - `crystalserver/data/scripts/talkactions/` — sugerir link em `docs/wiki/scripts/README.md`.\n\n### Assets (`otclient/data`)\n- **Assets**\n  - `otclient/data/cursors/` — sugerir link em `docs/wiki/assets/README.md`.\n  - `otclient/data/fonts/` — sugerir link em `docs/wiki/assets/README.md`.\n  - `otclient/data/images/` — sugerir link em `docs/wiki/assets/README.md`.\n  - `otclient/data/locales/` — sugerir link em `docs/wiki/assets/README.md` ou `docs/wiki/client/README.md`.\n  - `otclient/data/particles/` — sugerir link em `docs/wiki/assets/README.md`.\n  - `otclient/data/sounds/` — sugerir link em `docs/wiki/assets/README.md`."}
{"id": "governance/orphans.md::section-4", "system": "governance", "doc_path": "docs/wiki/governance/orphans.md", "type": "governance", "section": "Próximas ações", "content": "## Próximas ações\n- Incluir os caminhos órfãos nas seções de estrutura apropriadas.\n- Confirmar se algum caminho é **intencionalmente omitido** (legado ou em desuso)."}
{"id": "llm/agent-guide.md::section-1", "system": "llm", "doc_path": "docs/wiki/llm/agent-guide.md", "type": "llm", "section": "Document", "content": "[Wiki](../README.md) > Guia para agentes/LLMs\n\n# Guia para agentes e LLMs"}
{"id": "llm/agent-guide.md::section-2", "system": "llm", "doc_path": "docs/wiki/llm/agent-guide.md", "type": "llm", "section": "Como navegar a wiki", "content": "## Como navegar a wiki\n1. Comece pelo **hub**: `docs/wiki/README.md`.\n2. Use **Índices avançados** para localizar o domínio (server/client/protocol).\n3. Consulte **Mapa de Arquitetura** para contexto macro.\n4. Use o **Glossário** para termos específicos."}
{"id": "llm/agent-guide.md::section-3", "system": "llm", "doc_path": "docs/wiki/llm/agent-guide.md", "type": "llm", "section": "Onde encontrar respostas arquiteturais", "content": "## Onde encontrar respostas arquiteturais\n- **Macro e camadas**: `docs/wiki/ARQUITETURA.md`.\n- **Fluxos**: `docs/wiki/FLUXOS.md`.\n- **Sistemas**: `docs/wiki/SISTEMAS.md` e `docs/wiki/game-systems/`."}
{"id": "llm/agent-guide.md::section-4", "system": "llm", "doc_path": "docs/wiki/llm/agent-guide.md", "type": "llm", "section": "Onde encontrar exemplos", "content": "## Onde encontrar exemplos\n- **Servidor**: `docs/wiki/server/README.md`.\n- **Cliente**: `docs/wiki/client/README.md`.\n- **Scripts**: `docs/wiki/scripts/README.md`."}
{"id": "llm/agent-guide.md::section-5", "system": "llm", "doc_path": "docs/wiki/llm/agent-guide.md", "type": "llm", "section": "Onde NÃO inferir comportamento", "content": "## Onde NÃO inferir comportamento\n- Não deduzir opcodes ou fluxos não listados em `docs/wiki/protocol/README.md`.\n- Não assumir scripts ou módulos que não existam no repositório.\n- Não extrapolar comportamento além dos arquivos citados."}
{"id": "llm/agent-guide.md::section-6", "system": "llm", "doc_path": "docs/wiki/llm/agent-guide.md", "type": "llm", "section": "Boas práticas de resposta", "content": "## Boas práticas de resposta\n- Sempre citar arquivos referenciados.\n- Priorizar trechos com exemplos reais.\n- Evitar sínteses que introduzam novos sistemas."}
{"id": "llm/semantic-map.md::section-1", "system": "llm", "doc_path": "docs/wiki/llm/semantic-map.md", "type": "llm", "section": "Document", "content": "[Wiki](../README.md) > Mapa semântico (LLM)\n\n# Semantic Map (LLM)"}
{"id": "llm/semantic-map.md::section-2", "system": "llm", "doc_path": "docs/wiki/llm/semantic-map.md", "type": "llm", "section": "Sistemas", "content": "## Sistemas\n- **Servidor** ↔ **Protocolos** ↔ **Cliente**\n- **Scripts** (servidor) e **Módulos** (cliente)\n- **Game Systems** (combate, itens, mapas, etc.)\n- **Configuração** (server/client)\n- **Assets/UI** (cliente)"}
{"id": "llm/semantic-map.md::section-3", "system": "llm", "doc_path": "docs/wiki/llm/semantic-map.md", "type": "llm", "section": "Relações e dependências diretas", "content": "## Relações e dependências diretas\n- **Cliente → Protocolos**: `otclient/src/client/protocolgame*` envia/recebe mensagens.\n- **Protocolos → Servidor**: `crystalserver/src/server/network/protocol` valida e encaminha.\n- **Servidor → Scripts**: eventos disparam Lua em `crystalserver/data/scripts`.\n- **Servidor ↔ Banco**: persistência via `crystalserver/src/database` e `crystalserver/src/io`.\n- **Cliente → UI/Assets**: módulos usam OTUI e assets em `otclient/data`."}
{"id": "llm/semantic-map.md::section-4", "system": "llm", "doc_path": "docs/wiki/llm/semantic-map.md", "type": "llm", "section": "Fluxos principais", "content": "## Fluxos principais\n- **Login**: Cliente → ProtocolLogin → Server → resposta.\n- **Jogo**: Cliente ↔ ProtocolGame ↔ Server → atualizações de mapa/criaturas/itens.\n- **Eventos**: Server → Scripts → efeitos no mundo → mensagens ao cliente."}
{"id": "llm/semantic-map.md::section-5", "system": "llm", "doc_path": "docs/wiki/llm/semantic-map.md", "type": "llm", "section": "Pontos de integração", "content": "## Pontos de integração\n- **Protocolos**: opcodes e versões sincronizadas.\n- **Scripts**: hooks de eventos e actions/movements.\n- **UI**: módulos reagem a eventos do protocolo."}
{"id": "llm/semantic-map.md::section-6", "system": "llm", "doc_path": "docs/wiki/llm/semantic-map.md", "type": "llm", "section": "Áreas de acoplamento forte", "content": "## Áreas de acoplamento forte\n- OpCodes/versões de protocolo.\n- Definições de itens/criaturas que afetam cliente e servidor."}
{"id": "llm/semantic-map.md::section-7", "system": "llm", "doc_path": "docs/wiki/llm/semantic-map.md", "type": "llm", "section": "Áreas de desacoplamento", "content": "## Áreas de desacoplamento\n- Scripts Lua e módulos do cliente."}
{"id": "protocol/README.md::section-1", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Document", "content": "<!-- tags: - protocol - network - c++ priority: critical -->"}
{"id": "protocol/README.md::section-2", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Documenta os protocolos login/status/game.\n- **Why**: Garantir compatibilidade cliente ↔ servidor.\n- **Where**: crystalserver/src/server/network/protocol, otclient/src/client\n- **How**: Lista fluxos, opcodes e pontos de integração.\n- **Extends**: Adicionar opcodes sincronizados em ambos os lados.\n- **Risks**: Incompatibilidades de opcode e versão bloqueiam sessão.\n\n[Wiki](../README.md) > Protocolos\n\n# Protocolos de rede"}
{"id": "protocol/README.md::section-3", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Visão geral", "content": "## Visão geral\nA comunicação cliente ↔ servidor é feita por protocolos binários específicos do Open Tibia. O cliente serializa e envia mensagens, e o servidor processa essas mensagens na camada de protocolo antes de encaminhar ao núcleo do jogo."}
{"id": "protocol/README.md::section-4", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Localização no repositório", "content": "## Localização no repositório\n- **Servidor**: `crystalserver/src/server/network/protocol/` e `crystalserver/src/server/network/message/`.\n- **Cliente**: `otclient/src/client/protocolgame*.cpp` e `otclient/src/client/protocolcodes*`."}
{"id": "protocol/README.md::section-5", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- **Servidor**\n  - `protocollogin.*` — fluxo de login (identificador `0x01`).\n  - `protocolstatus.*` — status (identificador `0xFF`).\n  - `protocolgame.*` — mensagens do jogo (entrada e saída).\n- **Cliente**\n  - `protocolgameparse.cpp` — parsing de pacotes recebidos.\n  - `protocolgamesend.cpp` — envio de pacotes para o servidor.\n  - `protocolcodes.*` — opcodes e modos de mensagem."}
{"id": "protocol/README.md::section-6", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Sequência operacional (alto nível)", "content": "## Sequência operacional (alto nível)\n1. **Login/Status**: cliente abre conexão de login/status e envia a primeira mensagem; o servidor responde via `ProtocolLogin`/`ProtocolStatus`.\n2. **Jogo**: após autenticação, o cliente envia ações via `ProtocolGame` e recebe atualizações do mundo."}
{"id": "protocol/README.md::section-7", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "OpCodes importantes (cliente)", "content": "## OpCodes importantes (cliente)\nExemplos de opcodes definidos no cliente em `Protocolcodes.h`:\n- **Sessão**: `GameServerEnterGame`, `GameServerPing`, `GameServerPingBack`, `GameServerSessionEnd`.\n- **Mapa**: `GameServerFullMap`, `GameServerUpdateTile`, `GameServerCreateOnMap`, `GameServerChangeOnMap`, `GameServerDeleteOnMap`.\n- **Chat**: `GameServerTalk`, `GameServerTextMessage`.\n- **Entidades**: `GameServerCreatureHealth`, `GameServerCreatureOutfit`, `GameServerCreatureSpeed`."}
{"id": "protocol/README.md::section-8", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Exemplos práticos (do código)", "content": "## Exemplos práticos (do código)\n- **Parsing de chat**: `ProtocolGame::parseTalk` traduz o modo de mensagem e interpreta payloads com base no tipo.\n- **Tradução de modos**: `Proto::buildMessageModesMap` ajusta mapas de mensagem de acordo com a versão do cliente."}
{"id": "protocol/README.md::section-9", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: cliente não entra no jogo**\n  - **Possível causa**: incompatibilidade de opcodes ou protocolo.\n  - **Onde investigar**: sincronização entre `protocolcodes.*` no cliente e `protocolgame.*` no servidor.\n- **Sintoma: mensagens de chat inconsistentes**\n  - **Possível causa**: modo de mensagem não traduzido corretamente.\n  - **Onde investigar**: `ProtocolGame::parseTalk` e `Proto::buildMessageModesMap`."}
{"id": "protocol/README.md::section-10", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Pontos sensíveis**\n  - **Mapa e atualizações**: opcodes de mapa (`FullMap`, `UpdateTile`, `CreateOnMap`/`ChangeOnMap`/`DeleteOnMap`) afetam volume de dados.\n  - **Chat e mensagens**: parsing frequente pode aumentar uso de CPU em altas taxas de mensagem."}
{"id": "protocol/README.md::section-11", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Pontos de extensão e customização", "content": "## Pontos de extensão e customização\n- **Onde é seguro modificar**\n  - Adição de opcodes customizados deve ser feita de forma coordenada (cliente + servidor).\n- **Onde NÃO modificar sem coordenação**\n  - Alterações de opcodes existentes quebram compatibilidade e devem ser sincronizadas nos dois lados."}
{"id": "protocol/README.md::section-12", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "Integrações", "content": "## Integrações\n- **Servidor**: encaminha mensagens para `crystalserver/src/game/` e sistemas de criaturas/itens/mapa.\n- **Cliente**: integra com o núcleo em `otclient/src/client/` e dispara atualizações de UI e estado."}
{"id": "protocol/README.md::section-13", "system": "protocol", "doc_path": "docs/wiki/protocol/README.md", "type": "protocol", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: OpCodes customizados adicionados em ambos os lados.\n- **Use with caution**: Mapeamento de mensagens por versão.\n- **Do not modify**: Reaproveitar opcodes existentes sem migração."}
{"id": "roadmap.md::section-1", "system": "wiki", "doc_path": "docs/wiki/roadmap.md", "type": "wiki", "section": "Document", "content": "[Wiki](README.md) > Roadmap\n\n# Roadmap da documentação"}
{"id": "roadmap.md::section-2", "system": "wiki", "doc_path": "docs/wiki/roadmap.md", "type": "wiki", "section": "O que já está bem documentado", "content": "## O que já está bem documentado\n- Arquitetura geral e fluxos principais.\n- Páginas por sistema de jogo com exemplos práticos.\n- Protocolos com opcodes relevantes e pontos de acoplamento."}
{"id": "roadmap.md::section-3", "system": "wiki", "doc_path": "docs/wiki/roadmap.md", "type": "wiki", "section": "O que precisa melhorar", "content": "## O que precisa melhorar\n- Cobertura de áreas órfãs (ver `governance/orphans.md`).\n- Detalhamento de módulos específicos do cliente.\n- Mapeamento de enums e utilitários do servidor."}
{"id": "roadmap.md::section-4", "system": "wiki", "doc_path": "docs/wiki/roadmap.md", "type": "wiki", "section": "Prioridades futuras", "content": "## Prioridades futuras\n1. **Cobertura de órfãos críticos** (enums, utils, kv).\n2. **Documentação de módulos chave do cliente** (ex.: `game_interface`, `client_entergame`).\n3. **Guia de troubleshooting avançado** (erros de rede, runtime, compatibilidade)."}
{"id": "roadmap.md::section-5", "system": "wiki", "doc_path": "docs/wiki/roadmap.md", "type": "wiki", "section": "Débitos de documentação conhecidos", "content": "## Débitos de documentação conhecidos\n- Ausência de documentação para `crystalserver/src/enums/` e `crystalserver/src/utils/`.\n- Ausência de documentação para `otclient/src/tools/`.\n- Scripts sem referência explícita: `globalevents`, `talkactions`, `systems`."}
{"id": "scripts/README.md::section-1", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Document", "content": "<!-- tags: - scripts - lua - server - client priority: high -->"}
{"id": "scripts/README.md::section-2", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Extensões Lua do servidor e módulos do cliente.\n- **Why**: Permite evolução sem recompilar C++.\n- **Where**: crystalserver/data/scripts, otclient/modules\n- **How**: Scripts são carregados no boot e acionados por eventos.\n- **Extends**: Criar scripts em actions/spells/npcs e módulos client/game.\n- **Risks**: Erros de script podem bloquear eventos críticos.\n\n[Wiki](../README.md) > Scripts\n\n# Scripts e extensões"}
{"id": "scripts/README.md::section-3", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Visão geral", "content": "## Visão geral\nScripts fornecem extensibilidade para o servidor (Lua) e comportamento/UI no cliente (módulos e mods). Eles são o principal ponto de extensão sem recompilar o C++."}
{"id": "scripts/README.md::section-4", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Localização no repositório", "content": "## Localização no repositório\n- **Servidor**: `crystalserver/data/scripts/`, `crystalserver/data/events/`, `crystalserver/data/core.lua`, `crystalserver/data/global.lua`.\n- **Cliente**: `otclient/modules/`, `otclient/mods/`, `otclient/init.lua`."}
{"id": "scripts/README.md::section-5", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n### Servidor\n- `actions/`, `movements/`, `creaturescripts/` — hooks de ações e eventos de criaturas.\n- `spells/`, `runes/`, `weapons/` — magias e combate por scripts.\n- `globalevents/`, `eventcallbacks/` — eventos globais e callbacks.\n- `npcs/` — scripts de NPCs.\n\n### Cliente\n- `modules/client_*` — telas e fluxos de login/configuração.\n- `modules/game_*` — funcionalidades de jogo e UI.\n- `modulelib/`, `corelib/`, `gamelib/` — bibliotecas base para módulos."}
{"id": "scripts/README.md::section-6", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Fluxo de execução (alto nível)", "content": "## Fluxo de execução (alto nível)\n- **Servidor**: scripts são carregados durante a inicialização e acionados por eventos definidos em XML/Lua.\n- **Cliente**: módulos são carregados no bootstrap do cliente via `otclient/init.lua`."}
{"id": "scripts/README.md::section-7", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Exemplos práticos (do código)", "content": "## Exemplos práticos (do código)\n- **Spell/runa de exemplo**: `crystalserver/data/scripts/spells/#example.lua` define um `Combat()` com parâmetros e registra uma runa.\n- **Eventos registrados em XML**: `crystalserver/data/XML/events.xml` lista métodos de evento para `Creature`, `Party` e `Player`.\n- **Carga de scripts com logs**: `Scripts::loadScripts` registra scripts carregados e erros quando `SCRIPTS_CONSOLE_LOGS` está habilitado."}
{"id": "scripts/README.md::section-8", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: script não carrega**\n  - **Possível causa**: arquivo inválido ou erro de execução Lua.\n  - **Onde investigar**: `Scripts::loadScripts` registra `g_logger().error(...)` e imprime o erro de Lua.\n- **Sintoma: módulo de UI não inicia**\n  - **Possível causa**: dependências faltando ou erro de script.\n  - **Onde investigar**: erro de carregamento em `otclient/src/framework/core/module.cpp`."}
{"id": "scripts/README.md::section-9", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Pontos sensíveis**\n  - **Carga de scripts**: a carga percorre diretórios recursivamente e pode impactar boot do servidor.\n  - **Logs em excesso**: `SCRIPTS_CONSOLE_LOGS` aumenta volume de logs durante o boot.\n- **Onde investigar**\n  - `crystalserver/src/lua/scripts/scripts.cpp` (load e logging)."}
{"id": "scripts/README.md::section-10", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Pontos de extensão e customização", "content": "## Pontos de extensão e customização\n- **Onde é seguro modificar**\n  - Scripts Lua em `crystalserver/data/scripts/`.\n  - Módulos Lua em `otclient/modules/`.\n- **Onde exigir coordenação**\n  - Alterações em eventos registrados no XML devem corresponder aos scripts Lua existentes."}
{"id": "scripts/README.md::section-11", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "Integrações", "content": "## Integrações\n- **Servidor**: scripts são chamados pelo núcleo em `crystalserver/src/game/` e entidades em `crystalserver/src/creatures/`.\n- **Cliente**: módulos recebem eventos do framework e do protocolo para atualizar UI e estado."}
{"id": "scripts/README.md::section-12", "system": "scripts", "doc_path": "docs/wiki/scripts/README.md", "type": "scripts", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts em actions/spells/npcs e módulos game_*.\n- **Use with caution**: Eventos globais com alto volume.\n- **Do not modify**: Remover callbacks usados por eventos registrados."}
{"id": "server/README.md::section-1", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Document", "content": "<!-- tags: - server - c++ - lua priority: critical -->"}
{"id": "server/README.md::section-2", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Visão geral do CrystalServer e seus subsistemas.\n- **Why**: Centraliza contexto do backend e suas integrações.\n- **Where**: crystalserver/src, crystalserver/data\n- **How**: Descreve estrutura, fluxo de execução, debug e performance.\n- **Extends**: Scripts Lua e dados em crystalserver/data; ajustes em config.lua.\n- **Risks**: Mudanças em protocolo ou núcleo do jogo impactam cliente e gameplay.\n\n[Wiki](../README.md) > Servidor\n\n# Servidor (CrystalServer)"}
{"id": "server/README.md::section-3", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Visão geral", "content": "## Visão geral\nO CrystalServer é o backend responsável por simular o mundo do jogo, manter estado persistente e processar todas as regras de gameplay. Ele concentra a lógica de jogo, a camada de rede e a integração com banco de dados."}
{"id": "server/README.md::section-4", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Papel no projeto", "content": "## Papel no projeto\n- Mantém o estado do mundo e dos jogadores.\n- Processa ações e regras (combate, itens, mapas, eventos).\n- Integra com scripts Lua para extensibilidade.\n- Expõe comunicação com o cliente via protocolos."}
{"id": "server/README.md::section-5", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Localização no repositório", "content": "## Localização no repositório\n- Código principal: `crystalserver/src/`\n- Scripts e dados: `crystalserver/data/`, `crystalserver/data-crystal/`, `crystalserver/data-global/`\n- Configuração base: `crystalserver/config.lua.dist`\n- Testes: `crystalserver/tests/`"}
{"id": "server/README.md::section-6", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- `crystalserver/src/game/` — núcleo do jogo, ciclo principal e regras.\n- `crystalserver/src/server/` — servidor, sinais e camada de rede.\n- `crystalserver/src/server/network/` — conexão, mensagens e protocolos.\n- `crystalserver/src/creatures/` — criaturas, NPCs, jogadores e combate.\n- `crystalserver/src/items/` — itens e tipos de item.\n- `crystalserver/src/map/` — mapa e carregamento.\n- `crystalserver/src/database/` + `crystalserver/src/io/` — persistência e I/O.\n- `crystalserver/src/lua/` — integração com Lua.\n- `crystalserver/src/config/` — carregamento de configuração.\n- `crystalserver/src/security/` — segurança e validações."}
{"id": "server/README.md::section-7", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Fluxo de execução (alto nível)", "content": "## Fluxo de execução (alto nível)\n1. **Inicialização**: ponto de entrada em `crystalserver/src/main.cpp`, chamando `CrystalServer::run()` em `crystalserver/src/crystalserver.cpp`.\n2. **Carregamento**: configuração, dados e scripts Lua são carregados durante o `run()` antes de iniciar o game state.\n3. **Rede**: o servidor sobe protocolos de login/status e o protocolo de jogo.\n4. **Loop de jogo**: o núcleo em `crystalserver/src/game/` coordena eventos, agendamentos e atualizações do mundo."}
{"id": "server/README.md::section-8", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Exemplos práticos (do código)", "content": "## Exemplos práticos (do código)\n- **Inicialização e bootstrap**: `main()` delega para `CrystalServer::run()` e dispara o carregamento de módulos e mapas antes de iniciar o serviço de rede.\n  - Referências: `crystalserver/src/main.cpp`, `crystalserver/src/crystalserver.cpp`.\n- **Configuração de logs**: o nível de log é definido em `logLevel` no `config.lua.dist` (com observação sobre debug/trace em builds de debug).\n  - Referência: `crystalserver/config.lua.dist`.\n- **Logs escritos por scripts**: scripts Lua escrevem logs em `CORE_DIRECTORY/logs/...` (ex.: logins e comandos).\n  - Referências: `crystalserver/data/libs/functions/player.lua`, `crystalserver/data/libs/functions/functions.lua`."}
{"id": "server/README.md::section-9", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Debug e troubleshooting", "content": "## Debug e troubleshooting\n- **Sintoma: servidor inicia sem logs de detalhe**\n  - **Possível causa**: nível de log baixo ou build sem debug/trace.\n  - **Onde investigar**: ajuste `logLevel` em `config.lua.dist` e observe as notas sobre debug/trace.\n- **Sintoma: scripts não carregam**\n  - **Possível causa**: erro na carga de scripts Lua ou diretórios inexistentes.\n  - **Onde investigar**: carregamento e erros são registrados por `Scripts::loadScripts`.\n- **Breakpoints sugeridos**\n  - `main()` em `crystalserver/src/main.cpp`.\n  - `CrystalServer::run()` em `crystalserver/src/crystalserver.cpp` (carregamento inicial e transição de estados).\n  - `game` loop e operações centrais em `crystalserver/src/game/game.cpp`."}
{"id": "server/README.md::section-10", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Performance e otimização", "content": "## Performance e otimização\n- **Pontos sensíveis**\n  - **Dispatcher/scheduler**: eventos e tarefas assíncronas são agendadas pelo dispatcher, impactando latência e throughput.\n  - **Loop de jogo**: o núcleo do game é o ponto crítico de execução contínua.\n- **Onde investigar**\n  - `crystalserver/src/game/scheduling/dispatcher.hpp` (agendamento e execução de tarefas).\n  - `crystalserver/src/game/game.cpp` (nó central de lógica do jogo)."}
{"id": "server/README.md::section-11", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Pontos de extensão e customização", "content": "## Pontos de extensão e customização\n- **Onde é seguro modificar**\n  - Scripts Lua em `crystalserver/data/scripts/` (ações, movimentos, spells, runes, weapons).\n  - Registros e dados em `crystalserver/data/XML/`.\n  - Configurações em `crystalserver/config.lua.dist`.\n- **Onde exigir coordenação**\n  - Alterações em protocolos (login/status/jogo) exigem compatibilidade com o cliente."}
{"id": "server/README.md::section-12", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "Integrações", "content": "## Integrações\n- **Cliente**: comunicação via protocolos na camada `crystalserver/src/server/network/protocol/`.\n- **Banco de dados**: leitura/gravação em `crystalserver/src/database/` e `crystalserver/src/io/`.\n- **Scripts Lua**: carga e execução a partir de `crystalserver/data/scripts/` e `crystalserver/data/events/`.\n- **Configuração/XML**: parâmetros em `crystalserver/config.lua.dist` e definições em `crystalserver/data/XML/`."}
{"id": "server/README.md::section-13", "system": "server", "doc_path": "docs/wiki/server/README.md", "type": "server", "section": "LLM Extension Points", "content": "## LLM Extension Points\n- **Safe to extend**: Scripts Lua em data/scripts e configurações em config.lua.dist.\n- **Use with caution**: Camada de protocolo e ciclo principal do jogo.\n- **Do not modify**: Alterar opcodes ou fluxo de login sem coordenar com o cliente."}
{"id": "shared/README.md::section-1", "system": "shared", "doc_path": "docs/wiki/shared/README.md", "type": "shared", "section": "Document", "content": "<!-- tags: - shared - docs priority: low -->"}
{"id": "shared/README.md::section-2", "system": "shared", "doc_path": "docs/wiki/shared/README.md", "type": "shared", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Materiais de apoio e documentação interna.\n- **Why**: Centraliza referências e contexto.\n- **Where**: docs, ai, codex-client-readmes\n- **How**: Arquivos de documentação consultivos.\n- **Extends**: Adicionar referências e guias de processo.\n- **Risks**: Desatualização gera inconsistência de contexto.\n\n[Wiki](../README.md) > Compartilhado\n\n# Compartilhado / apoio"}
{"id": "shared/README.md::section-3", "system": "shared", "doc_path": "docs/wiki/shared/README.md", "type": "shared", "section": "Visão geral", "content": "## Visão geral\nEsta seção cobre artefatos compartilhados do repositório que servem como apoio para o servidor e o cliente, principalmente documentação, referências e material de contexto."}
{"id": "shared/README.md::section-4", "system": "shared", "doc_path": "docs/wiki/shared/README.md", "type": "shared", "section": "Papel no projeto", "content": "## Papel no projeto\n- Centralizar regras e referências de documentação.\n- Armazenar materiais de apoio para execução e análise do repositório."}
{"id": "shared/README.md::section-5", "system": "shared", "doc_path": "docs/wiki/shared/README.md", "type": "shared", "section": "Localização no repositório", "content": "## Localização no repositório\n- `docs/` — documentação geral (regras, playbooks, enums).\n- `ai/` — contexto de execução e referências internas.\n- `codex-client-readmes/` — documentação organizada por áreas do OTClient."}
{"id": "shared/README.md::section-6", "system": "shared", "doc_path": "docs/wiki/shared/README.md", "type": "shared", "section": "Estrutura interna", "content": "## Estrutura interna\n- `docs/` contém arquivos Markdown e templates para processos internos.\n- `ai/` concentra contexto de arquitetura e protocolos.\n- `codex-client-readmes/` espelha áreas do cliente com guias específicos."}
{"id": "shared/README.md::section-7", "system": "shared", "doc_path": "docs/wiki/shared/README.md", "type": "shared", "section": "Integrações", "content": "## Integrações\n- **Servidor/Cliente**: não há integração de runtime; serve como base de documentação e referência."}
{"id": "tests/README.md::section-1", "system": "tests", "doc_path": "docs/wiki/tests/README.md", "type": "tests", "section": "Document", "content": "<!-- tags: - tests priority: low -->"}
{"id": "tests/README.md::section-2", "system": "tests", "doc_path": "docs/wiki/tests/README.md", "type": "tests", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Estruturas de teste do servidor e cliente.\n- **Why**: Permite validação automatizada.\n- **Where**: crystalserver/tests, otclient/tests\n- **How**: Integrados ao build do projeto.\n- **Extends**: Adicionar testes com foco em componentes críticos.\n- **Risks**: Cobertura insuficiente aumenta risco de regressão.\n\n[Wiki](../README.md) > Testes\n\n# Testes"}
{"id": "tests/README.md::section-3", "system": "tests", "doc_path": "docs/wiki/tests/README.md", "type": "tests", "section": "Visão geral", "content": "## Visão geral\nO repositório inclui estruturas de teste para servidor e cliente, organizadas em pastas específicas."}
{"id": "tests/README.md::section-4", "system": "tests", "doc_path": "docs/wiki/tests/README.md", "type": "tests", "section": "Localização no repositório", "content": "## Localização no repositório\n- **Servidor**: `crystalserver/tests/`\n- **Cliente**: `otclient/tests/`"}
{"id": "tests/README.md::section-5", "system": "tests", "doc_path": "docs/wiki/tests/README.md", "type": "tests", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- Testes do servidor cobrem componentes de gameplay e infraestrutura.\n- Testes do cliente cobrem módulos e comportamento do framework."}
{"id": "tests/README.md::section-6", "system": "tests", "doc_path": "docs/wiki/tests/README.md", "type": "tests", "section": "Integrações", "content": "## Integrações\n- **Servidor**: integra com CMake e dependências de teste.\n- **Cliente**: integra com o build do OTClient e bibliotecas auxiliares."}
{"id": "tools/README.md::section-1", "system": "tools", "doc_path": "docs/wiki/tools/README.md", "type": "tools", "section": "Document", "content": "<!-- tags: - tools - build priority: low -->"}
{"id": "tools/README.md::section-2", "system": "tools", "doc_path": "docs/wiki/tools/README.md", "type": "tools", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Ferramentas e scripts auxiliares.\n- **Why**: Automatiza build e execução.\n- **Where**: crystalserver/*.sh, otclient/tools\n- **How**: Scripts chamam CMake/execução.\n- **Extends**: Adicionar scripts com documentação mínima.\n- **Risks**: Scripts inconsistentes podem quebrar build.\n\n[Wiki](../README.md) > Ferramentas\n\n# Ferramentas"}
{"id": "tools/README.md::section-3", "system": "tools", "doc_path": "docs/wiki/tools/README.md", "type": "tools", "section": "Visão geral", "content": "## Visão geral\nEsta seção cobre scripts e ferramentas auxiliares para build, execução e manutenção do servidor e do cliente."}
{"id": "tools/README.md::section-4", "system": "tools", "doc_path": "docs/wiki/tools/README.md", "type": "tools", "section": "Localização no repositório", "content": "## Localização no repositório\n- **Servidor**: scripts como `crystalserver/recompile.sh`, `crystalserver/start.sh`, `crystalserver/linux_installer.sh`.\n- **Cliente**: `otclient/tools/` e scripts como `otclient/recompile.sh`."}
{"id": "tools/README.md::section-5", "system": "tools", "doc_path": "docs/wiki/tools/README.md", "type": "tools", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- **Build**: CMake presets e scripts de recompilação.\n- **Execução**: scripts de start e suporte a debug.\n- **Instalação**: scripts de instalação no servidor."}
{"id": "tools/README.md::section-6", "system": "tools", "doc_path": "docs/wiki/tools/README.md", "type": "tools", "section": "Integrações", "content": "## Integrações\n- **Servidor/Cliente**: ferramentas interagem com CMake e binários gerados para compilar e rodar o projeto."}
{"id": "ui/README.md::section-1", "system": "ui", "doc_path": "docs/wiki/ui/README.md", "type": "ui", "section": "Document", "content": "<!-- tags: - ui - client - lua priority: high -->"}
{"id": "ui/README.md::section-2", "system": "ui", "doc_path": "docs/wiki/ui/README.md", "type": "ui", "section": "LLM Summary", "content": "## LLM Summary\n- **What**: Arquitetura de UI/OTUI do cliente.\n- **Why**: Define layout e interação do usuário.\n- **Where**: otclient/data/styles, otclient/modules, otclient/src/framework/ui\n- **How**: Layouts e módulos carregam widgets e estilos.\n- **Extends**: Criar módulos UI e estilos OTUI/OTML.\n- **Risks**: Mudanças em widgets base afetam toda a interface.\n\n[Wiki](../README.md) > UI\n\n# UI e OTUI"}
{"id": "ui/README.md::section-3", "system": "ui", "doc_path": "docs/wiki/ui/README.md", "type": "ui", "section": "Visão geral", "content": "## Visão geral\nA UI do OTClient é construída com OTUI/OTML e módulos Lua que definem layouts, estilos e comportamento da interface."}
{"id": "ui/README.md::section-4", "system": "ui", "doc_path": "docs/wiki/ui/README.md", "type": "ui", "section": "Localização no repositório", "content": "## Localização no repositório\n- `otclient/data/styles/` — estilos e componentes UI.\n- `otclient/modules/` — módulos com layouts e lógica de interface.\n- `otclient/src/framework/ui/` — framework de UI em C++."}
{"id": "ui/README.md::section-5", "system": "ui", "doc_path": "docs/wiki/ui/README.md", "type": "ui", "section": "Estrutura interna (alto nível)", "content": "## Estrutura interna (alto nível)\n- **Layouts e estilos**: arquivos `.otui` e `.otml` em `otclient/data/styles/` e módulos.\n- **Módulos UI**: `otclient/modules/client_*` e `otclient/modules/game_*`.\n- **Framework UI**: widgets e renderização base em `otclient/src/framework/ui/`."}
{"id": "ui/README.md::section-6", "system": "ui", "doc_path": "docs/wiki/ui/README.md", "type": "ui", "section": "Fluxo de execução (alto nível)", "content": "## Fluxo de execução (alto nível)\n1. O framework UI inicializa no bootstrap do cliente.\n2. Módulos carregam seus layouts e estilos.\n3. Eventos do protocolo e do input atualizam a UI via módulos."}
{"id": "ui/README.md::section-7", "system": "ui", "doc_path": "docs/wiki/ui/README.md", "type": "ui", "section": "Integrações", "content": "## Integrações\n- **Input**: subsistema em `otclient/src/framework/input/`.\n- **Protocolo**: atualizações vindas de `otclient/src/client/protocolgameparse.cpp`.\n- **Módulos**: UI interage com `gamelib`, `corelib` e módulos `game_*`."}
